@model IEnumerable<TodoItem>

@{
    ViewData["Title"] = "Мои задачи";
}

<div class="container mt-4" style="max-width: 800px;">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold m-0">Мои задачи</h2>
        <a asp-action="Create" class="btn btn-primary btn-sm">
            <i class="bi bi-plus-lg"></i> Новая задача
        </a>
    </div>

    <div class="mb-4">
        @* Заменяем ссылки на кнопки с data-атрибутами *@
        <button onclick="loadTasks('date')" class="btn btn-light btn-sm border text-muted">По дате</button>
        <button onclick="loadTasks('title')" class="btn btn-light btn-sm border text-muted">По названию</button>
    </div>

    <div id="taskListContainer">
        @await Html.PartialAsync("_TaskList", Model)
    </div>
</div>

@section Scripts {
    <script>
        function loadTasks(sortOrder) {
            // Анимация затухания перед загрузкой
            $('#taskListContainer').css('opacity', '0.5');

            $.ajax({
                url: '@Url.Action("GetTasksPartial", "Todo")',
                data: { sortOrder: sortOrder },
                success: function (data) {
                    $('#taskListContainer').html(data);
                    $('#taskListContainer').css('opacity', '1');
                }
            });
        }
    </script>
}